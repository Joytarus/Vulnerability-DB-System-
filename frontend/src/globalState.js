import { ref } from 'vue';

export const useGlobalState = () => {
    const showLoginModal = ref(false);
    const showRegisterModal = ref(false);
    const isAuthenticated = ref(!!localStorage.getItem('token')); // Checking if token exists in localStorage

    // Toggling methods for the modals
    const toggleLoginModal = () => {
        console.log("Toggling Login Modal");
        showLoginModal.value = !showLoginModal.value;
        if (showLoginModal.value) showRegisterModal.value = false; // Close register modal if login modal is opened
    };

    const toggleRegisterModal = () => {
        console.log("Toggling Register Modal");
        showRegisterModal.value = !showRegisterModal.value;
        if (showRegisterModal.value) showLoginModal.value = false; // Close login modal if register modal is opened
    };

    const setAuthenticated = (status) => {
        isAuthenticated.value = status;
    };

    return {
        showLoginModal,
        showRegisterModal,
        toggleLoginModal,
        toggleRegisterModal,
        isAuthenticated,
        setAuthenticated
    };
};