import { ref } from 'vue';

export const useGlobalState = () => {
    const showLoginModal = ref(false);
    const showRegisterModal = ref(false);
    const isAuthenticated = ref(!!localStorage.getItem('token')); // Checking if token exists in localStorage

    // Methods to open the modals
    const openLoginModal = () => {
        console.log("Opening Login Modal");
        showLoginModal.value = true;
        showRegisterModal.value = false; // Close register modal when opening login modal
    };

    const openRegisterModal = () => {
        console.log("Opening Register Modal");
        showRegisterModal.value = true;
        showLoginModal.value = false; // Close login modal when opening register modal
    };

    // Methods to close the modals
    const closeLoginModal = () => {
        console.log("Closing Login Modal");
        showLoginModal.value = false;
    };

    const closeRegisterModal = () => {
        console.log("Closing Register Modal");
        showRegisterModal.value = false;
    };

    const setAuthenticated = (status) => {
        isAuthenticated.value = status;
    };

    return {
        showLoginModal,
        showRegisterModal,
        openLoginModal,
        openRegisterModal,
        closeLoginModal,
        closeRegisterModal,
        isAuthenticated,
        setAuthenticated
    };
};