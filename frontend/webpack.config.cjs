// webpack.config.js
const webpack = require('webpack');
const path = require('path');

// Function to stringify environment variables
const stringifyEnvVars = (envVars) => {
    const result = {};
    for (const key in envVars) {
        if (envVars.hasOwnProperty(key)) {
            result[`process.env.${key}`] = JSON.stringify(envVars[key]);
        }
    }
    return result;
};

// Define your environment variables
const envVars = {
    FIREBASE_API_KEY: process.env.FIREBASE_API_KEY,
    FIREBASE_AUTH_DOMAIN: process.env.FIREBASE_AUTH_DOMAIN,
    FIREBASE_PRODUCT_ID: process.env.FIREBASE_PRODUCT_ID,
    FIREBASE_STORAGE_BUCKET: process.env.FIREBASE_STORAGE_BUCKET,
    FIREBASE_MESSAGING_ID: process.env.FIREBASE_MESSAGING_ID,
    FIREBASE_APP_ID: process.env.FIREBASE_APP_ID,
    FIREBASE_MEASUREMENT_ID: process.env.FIREBASE_MEASUREMENT_ID,
};

module.exports = {
    // ... existing config
    entry: './src/main.js', // Update with your entry point if different
    output: {
        filename: 'bundle.js',
        path: path.resolve(__dirname, 'dist'),
    },
    plugins: [
        new webpack.DefinePlugin(stringifyEnvVars(envVars)),
    ],
    // ... existing config
};